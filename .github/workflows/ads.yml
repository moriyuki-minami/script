name: auto_doreming_shussha

on: [workflow_dispatch]

# on:
#   schedule:
#     - cron: '0 0 * * 1,2,3,4,5'

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    
      - name: checkout
        uses: actions/checkout@v3
      
      - name: setup python
        uses: actions/setup-python@v3
        with:
          python-version: '3.10'
        
      - name: install python tools
        run: |
          python -m pip install --upgrade pip
          pip install pytest
          
      - name: do
        run: |
          pwd
          ls
          day=`date "+%Y\/%-m\/%-d"`
          echo ${day}
          cat ./holidays.csv | sed -n -E -e "/${day},/p" > ./sed_result
          ls -la
          cat ./sed_result
          sr=`cat ./sed_result`
          echo ${sr}
          
          if [ -n "$sr" ]; then
            echo ${sr}
            exit 0
          fi
          
      - name: run python
        run: |
          pytest
